!function(i){"use strict";"function"==typeof define&&define.amd?define(["jquery","videojs","imagesloaded","jquery-ui"],i):i(jQuery,videojs)}(function(i,o){i.BigVideo=function(e){function t(){var o=T.container.width(),e=T.container.height(),t=o/e;b>t?"video"===g?(l.width(e*b).height(e),T.shrinkable?i(h).css("top",-(o/b-e)/2).css("left",0).css("height",o/b):i(h).css("top",0).css("left",-(e*b-o)/2).css("height",e),i(h+"_html5_api").css("width",e*b).css("height",e),i(h+"_flash_api").css("width",e*b).css("height",e)):i("#big-video-image").css({width:"auto",height:e,top:0,left:-(e*b-o)/2}):"video"===g?(l.width(o).height(o/b),i(h).css("top",-(o/b-e)/2).css("left",0).css("height",o/b),i(h+"_html5_api").css("width",i(h+"_html5_api").parent().width()+"px").css("height","auto"),i(h+"_flash_api").css("width",o).css("height",o/b)):i("#big-video-image").css({width:o,height:"auto",top:-(o/b-e)/2,left:0})}function d(){var o='<div id="big-video-control-container">';o+='<div id="big-video-control">',o+='<a href="#" id="big-video-control-play"></a>',o+='<div id="big-video-control-middle">',o+='<div id="big-video-control-bar">',o+='<div id="big-video-control-bound-left"></div>',o+='<div id="big-video-control-progress"></div>',o+='<div id="big-video-control-track"></div>',o+='<div id="big-video-control-bound-right"></div>',o+="</div>",o+="</div>",o+='<div id="big-video-control-timer"></div>',o+="</div>",o+="</div>",T.container.append(o),i("#big-video-control-container").css("display","none"),i("#big-video-control-timer").css("display","none"),i("#big-video-control-track").slider({animate:!0,step:.01,slide:function(o,e){_=!0,i("#big-video-control-progress").css("width",e.value-.16+"%"),l.currentTime(e.value/100*l.duration())},stop:function(i,o){_=!1,l.currentTime(o.value/100*l.duration())}}),i("#big-video-control-bar").click(function(o){l.currentTime(o.offsetX/i(this).width()*l.duration())}),i("#big-video-control-play").click(function(i){i.preventDefault(),n("toggle")}),l.on("timeupdate",function(){if(!_&&l.currentTime()/l.duration()){var o=l.currentTime(),e=Math.floor(o/60),t=Math.floor(o)-60*e;10>t&&(t="0"+t);var d=l.currentTime()/l.duration()*100;i("#big-video-control-track").slider("value",d),i("#big-video-control-progress").css("width",d-.16+"%"),i("#big-video-control-timer").text(e+":"+t+"/"+m)}})}function n(o){var e=o||"toggle";"toggle"===e&&(e=k?"pause":"play"),"pause"===e?(l.pause(),i("#big-video-control-play").css("background-position","-16px"),k=!1):"play"===e&&(l.play(),i("#big-video-control-play").css("background-position","0"),k=!0)}function a(){l.play(),T.container.off("click",a)}function r(){v++,v===L.length&&(v=0),s(L[v])}function s(o){i(h).css("display","block"),g="video",l.src(o),k=!0,j?(i("#big-video-control-container").css("display","none"),l.ready(function(){l.volume(0)}),doLoop=!0):(i("#big-video-control-container").css("display","block"),l.ready(function(){l.volume(y)}),doLoop=!1),i("#big-video-image").css("display","none"),i(h).css("display","block")}function c(o){i("#big-video-image").remove(),l.pause(),i(h).css("display","none"),i("#big-video-control-container").css("display","none"),g="image";var e=i('<img id="big-video-image" src='+o+" />");f.append(e),i("#big-video-image").imagesLoaded(function(){b=i("#big-video-image").width()/i("#big-video-image").height(),t()})}var l,v,g,u={useFlashForFirefox:!0,forceAutoplay:!1,controls:!1,doLoop:!1,container:i("body"),shrinkable:!1},p=this,h="#big-video-vid",f=i('<div id="big-video-wrap"></div>'),b=(i(""),16/9),m=0,y=.8,w=!1,_=!1,k=!1,x=!1,j=!1,L=[],T=i.extend({},u,e);p.init=function(){if(!w){T.container.prepend(f);var e=T.forceAutoplay?"autoplay":"";l=i('<video id="'+h.substr(1)+'" class="video-js vjs-default-skin" preload="auto" data-setup="{}" '+e+" webkit-playsinline></video>"),l.css("position","absolute"),f.append(l);var n=["html5","flash"],s=navigator.userAgent.toLowerCase(),c=-1!=s.indexOf("firefox");T.useFlashForFirefox&&c&&(n=["flash","html5"]),l=o(h.substr(1),{controls:!1,autoplay:!0,preload:"auto",techOrder:n}),T.controls&&d(),t(),w=!0,k=!1,T.forceAutoplay&&i("body").on("click",a),i("#big-video-vid_flash_api").attr("scale","noborder").attr("width","100%").attr("height","100%"),i(window).on("resize.bigvideo",function(){t()}),l.on("loadedmetadata",function(){b=document.getElementById("big-video-vid_flash_api")?document.getElementById("big-video-vid_flash_api").vjs_getProperty("videoWidth")/document.getElementById("big-video-vid_flash_api").vjs_getProperty("videoHeight"):i("#big-video-vid_html5_api").prop("videoWidth")/i("#big-video-vid_html5_api").prop("videoHeight"),t();var o=Math.round(l.duration()),e=Math.floor(o/60),d=o-60*e;10>d&&(d="0"+d),m=e+":"+d}),l.on("ended",function(){T.doLoop&&(l.currentTime(0),l.play()),x&&r()})}},p.show=function(i,o){if(void 0===o&&(o={}),j=o.ambient===!0,(j||o.doLoop)&&(T.doLoop=!0),"string"==typeof i){var e=i.substring(i.lastIndexOf(".")+1);"jpg"===e||"gif"===e||"png"===e?c(i):(o.altSource&&navigator.userAgent.toLowerCase().indexOf("firefox")>-1&&(i=o.altSource),s(i),o.onShown&&o.onShown(),x=!1)}else L=i,v=0,s(L[v]),o.onShown&&o.onShown(),x=!0},p.getPlayer=function(){return l},p.remove=p.dispose=function(){w=!1,f.remove(),i(window).off("resize.bigvideo"),l&&(l.off("loadedmetadata"),l.off("ended"),l.dispose())},p.triggerPlayer=function(i){n(i)}}});